@using Microsoft.Extensions.Localization
@using Taskboard.Components.Dialogs
@using Taskboard.Entities.Task
@using Taskboard.Models
@using Taskboard.Models.DTO
@inject IDialogService DialogService
@inject IStringLocalizer<SharedResource> localizer


<MudButton OnClick="@(() => OpenDialogAsync(SelectedTask))" Variant="Variant.Filled" Color="Color.Primary"><MudIcon Icon="@Icons.Material.Filled.Brush" Title="Edit" /> </MudButton>

@code {
    [Parameter]
    public TaskItemDTO SelectedTask { get; set; }
    
    private Task OpenDialogAsync(TaskItemDTO task)
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        var dialogParameters = new DialogParameters<UpdateDialog>
        {
            {x => x.CurrentTask, task}
        };

        return DialogService.ShowAsync<UpdateDialog>( @localizer["Edit"], dialogParameters, options);
    }
}